<!DOCTYPE html>
<html lang="fa-ir">
<head>

  <meta charset="utf-8" />

  
  <title>۳۰ روز با TDD: روز هشتم: برخورد با defect ها</title>

  
  




  
  <meta name="author" content="حامد سعیدی فرد" />
  <meta name="description" content="نوشته به زبان انگلیسی روز هشتم را در این آدرس می‌توانید مطالعه کنید. قبل از شروع لازم است درباره موضوع امروز یعنی defect و تفاوت آن با bug نکته‌ای را عرض کنم. defect که شاید بتوان آن را نقص ترجمه کرد در واقع انحراف از نیازمندی‌های نرم‌افزار است و bug نتیجه خطا در کدنویسی، اینجا را ببینید.
defect بد در نرم‌افزار خوب مهم نیست که چقدر خوب کد بنویسید و چقدر پیاده‌سازی نیازمندی‌های اصلی را دنبال کرده‌اید و مهم نیست که چقدر نرم‌افزارتان را تست کرده‌اید، defect ها یک واقعیت در دنیای نرم‌افزار هستند." />

  
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@hamed" />
    <meta name="twitter:title" content="۳۰ روز با TDD: روز هشتم: برخورد با defect ها" />
    <meta name="twitter:description" content="نوشته به زبان انگلیسی روز هشتم را در این آدرس می‌توانید مطالعه کنید. قبل از شروع لازم است درباره موضوع امروز یعنی defect و تفاوت آن با bug نکته‌ای را عرض کنم. defect که شاید بتوان آن را نقص ترجمه کرد در واقع انحراف از نیازمندی‌های نرم‌افزار است و bug نتیجه خطا در کدنویسی، اینجا را ببینید.
defect بد در نرم‌افزار خوب مهم نیست که چقدر خوب کد بنویسید و چقدر پیاده‌سازی نیازمندی‌های اصلی را دنبال کرده‌اید و مهم نیست که چقدر نرم‌افزارتان را تست کرده‌اید، defect ها یک واقعیت در دنیای نرم‌افزار هستند." />
    <meta name="twitter:image" content="http://elmah.ir/oldimg/tdd_cycle.jpg" />
  




<meta name="generator" content="Hugo 0.27.1" />


<link rel="canonical" href="http://elmah.ir/post/85-%DB%B3%DB%B0-%D8%B1%D9%88%D8%B2-%D8%A8%D8%A7-tdd--%D8%B1%D9%88%D8%B2-%D9%87%D8%B4%D8%AA%D9%85--%D8%A8%D8%B1%D8%AE%D9%88%D8%B1%D8%AF-%D8%A8%D8%A7-defect-%D9%87%D8%A7/" />
<link rel="alternative" href="http://elmah.ir/index.xml" title="elmah" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="elmah" />
<meta name="msapplication-tooltip" content="elmah" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="http://elmah.ir/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="http://elmah.ir/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="http://elmah.ir/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="http://elmah.ir/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="http://elmah.ir/img/touch-icon-apple.png" />
<link rel="mask-icon" href="http://elmah.ir/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="http://elmah.ir/css/bundle.css" />
<link rel="stylesheet" href="http://elmah.ir/css/elmah.css" />

  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://avatars1.githubusercontent.com/u/1385656?s=460&amp;v=4" alt="Avatar">
  
  <h2 class="title">elmah</h2>
  
  <p class="subtitle">~ یادداشت‌های یک برنامه‌نویس خوشحال ~</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item  is-active"><a href="http://elmah.ir/">صفحه نخست</a></li>
      
        <li class="menu-item "><a href="https://hameds.github.io/slides/">پرزنت‌های من</a></li>
      
        <li class="menu-item "><a href="http://elmah.ir/about/">درباره من</a></li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      

      
      <li class="social-item">
        <a href="//github.com/hameds" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      <li class="social-item">
        <a href="//twitter.com/hamed" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="http://elmah.ir/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">۳۰ روز با TDD: روز هشتم: برخورد با defect ها</h1>
      <p class="post-meta">@حامد سعیدی فرد · 5 دقیقه خواندن</p>
    </header>
    <article class="post-content">

<p>نوشته به زبان انگلیسی روز هشتم را در <a href="http://blogs.telerik.com/james-bender/posts.aspx/13-09-25/30-days-of-tdd-day-eight-dealing-with-defects">این آدرس</a> می‌توانید مطالعه کنید. قبل از شروع لازم است درباره موضوع امروز یعنی defect و تفاوت آن با bug نکته‌ای را عرض کنم. defect که شاید بتوان آن را نقص ترجمه کرد در واقع انحراف از نیازمندی‌های نرم‌افزار است و bug نتیجه خطا در کدنویسی، <a href="http://programmers.stackexchange.com/questions/37029/difference-between-defect-and-bug-in-testing">اینجا</a> را ببینید.</p>

<h3 id="defect-بد-در-نرم-افزار-خوب">defect بد در نرم‌افزار خوب</h3>

<p>مهم نیست که چقدر خوب کد بنویسید و چقدر پیاده‌سازی نیازمندی‌های اصلی را دنبال کرده‌اید و مهم نیست که چقدر نرم‌افزارتان را تست کرده‌اید، defect ها یک واقعیت در دنیای نرم‌افزار هستند. البته TDD به شما کمک می‌کند که تعداد آن‌ها را تا حد زیادی کم کنید ولی فکر می‌کنم راهی برای اینکه از defect ها اجتناب کنیم وجود نداشته باشد.</p>

<p>شاید دلیل defect ها، نیازمندی‌های تدوین شده برای نرم‌افزار باشد که دقیقاً مطابق نیاز تجاری نیست. شاید فهم نادرست یا ناقص از نیازمندی‌های نرم‌افزار باشد و یا شاید یک جنبه فنی از طراحی نرم‌افزار باشد که شما خیلی راحت آن را جا انداخته‌اید. صرفنظر از دلیل، اگر نرم‌افزار تولید می‌کنید، defect ها یک حقیقت در زندگی شما هستند. خبر خوب این است که اگر TDD را تمرین می‌کنید گردش کار برای مقابله با defect ها نه تنها ساده است، بلکه اگر درست اجرایی شود می‌تواند به اطمینان از اینکه defect های حل شده، حل شده باقی بمانند کمک می‌کند.</p>

<p>برای نشان دادن این موضوع، اجازه بدهید برگردیم و مثال روز سوم و چهارم را با هم مرور کنیم. برای یادآوری صورت مساله، قرار بود من یک متد بنویسیم که تعداد تکرار یک کاراکتر در یک رشته را بشمارد. برای این کار من تست‌های زیر را نوشتم</p>

<script src="//gist.github.com/hameds/ab222c0eddc62e63821bef9822b5d0c3.js"></script>

<p>الگوریتمی که برای pass کردن تست‌های بالا استفاده کردم را در زیر می‌توانید مشاهده کنید</p>

<script src="//gist.github.com/hameds/99c20c3dd751db95fc85d1208d94d80f.js"></script>

<p>بعد از اینکه مدتی از نوشتن این کدها گذشت، defect زیر گزارش شد:</p>

<p>کاربر قادر است که ۲ کاراکتر را به عنوان پارامتر دوم به تابع FindNumberOfOccurences پاس دهد و بعد از این کار یک exception از نوع FormatException ایجاد می‌شود. رفتار مورد انتظار این است که متد استثنا از نوع ArgumentException برگرداند.</p>

<p>وقتی به این موضوع فکر کنید، defect ها در واقع یک نوع دیگر نیازمندی نرم‌افزار هستند. نیازمندی‌های سنتی نرم‌افزار می‌گویند که یک نرم‌افزار چطور باید کار کند در حالی که defect‌ها می‌گویند نرم‌افزار چطور باید کار می‌کرده است. وقتی شما از TDD استفاده می‌کنید و نرم‌افزارتان را بر پایه تست‌ها می‌نویسید که خود آن تست‌ها بر پایه نیازمندی‌های نرم‌افزار تولید شده‌اند، شما باید همه آن نیازمندی‌ها را در کد خود ببینید. اگر این درست باشد، defect ها چیزی به جز یک نیازمندی جدید که شما نمی‌دانستید وجود دارد یا بهبود یک نیازمندی پیاده شده فعلی نیستند. این نیازمندی‌ها (در واقع defect ها) می‌توانند کاربردی باشند (مثل اینکه برنامه در IE 6 کار نمی‌کند) یا مانند مساله بالا، مربوط به حوزه نیازمندی‌های تجاری (business domain requirement) باشند.</p>

<p>صرفنظر از نوع نیازمندی‌ جدید، گردش کار مربوط به آن مشابه است. اول باید یک تست بنویسم. در مورد این مثال من تستی می‌نویسم که مشخص کند که رفتار اشاره شده در شرح defect در واقع یک خطا (error) است و بنابراین تست باید fail شود</p>

<script src="//gist.github.com/hameds/c3237ff09ce552f26d0ea03b8d2f543f.js"></script>

<p>این شبیه تست قبلی به نظر می‌رسد اما چند تفاوت وجود دارد. یکی از آن‌ تفاو‌ت‌ها این است که من نوع مقدار برگشتی از FindNumberOfOccurences را مشخص نکردم و حتی مقدار برگشتی را دریافت یا ذخیره نکردم و چون هیچ‌یک از این دو را ندارم هیچ فراخوانی Assert.AreEqual هم انجام نشده است. این مساله به این خاطر است که من انتظار دارم که تابع FindNumberOfOccurences یک استثنا (exception) از نوع  ArgumentException ایجاد کند.</p>

<p>انتظار دارم که در اولین اجرا، تست fail شود و نتیجه زیر مرا ناامید نمی‌کند:</p>

<p><img src="http://elmah.ir/oldimg/TDD/8/image_thumb1D0ACE031E032.png" alt="" /></p>

<p>اگر گردش کار TDD را به یاد داشته باشید، می‌دانید که گام بعدی نوشتن ساده‌ترین کدی است که کار می‌کند. برای این مثال من پیاده‌سازی تابع FindNumberOfOccurences را تغییر می‌دهم تا بلافاصله یک exception ایجاد کند.</p>

<script src="//gist.github.com/hameds/667c58e36aef8c57ce55bcd015317e4a.js"></script>

<p>همان‌طور که در خط ۹ می‌بینید من خیلی ساده یک وهله (instance) جدید از نوع ArgumentException ایجاد و throw کرده‌ام. اگر تستم را دوباره اجرا کنم خواهم دید که تست pass می‌شود.</p>

<p><img src="http://elmah.ir/oldimg/TDD/8/image_thumb3EB916791EACF.png" alt="" /></p>

<p>تست جدید pass می‌شود. قبل از اینکه بگوییم کارمان تمام شده باید مطمئن شویم که چیزی خراب نشده باشد. این کار را با اجرا کردن همه تست‌ها می‌توانیم انجام دهیم.</p>

<p><img src="http://elmah.ir/oldimg/TDD/8/image_thumb56D4A25910DDE.png" alt="" /></p>

<p>در حالی که ما defect را fix کردیم چیز دیگری را دچار مشکل کردیم. این یک مثال خوب درباره اهمیت TDD و Unit Test به صورت کلی است. بدون وجود تست‌ها، هیچ راه ساده‌ای برای فهمیدن اینکه با تغییر تابع چه تاثیری در کد گذاشته شده است وجود نداشت. در این مورد در نوشته‌های بعدی که درباره refactoring هستند بیشتر صحبت می‌کنیم.</p>

<p>حالا باید کاری کنم که تمام تست‌ها pass‌ شوند. این کار با تغییری در تابع FindNumberOfOccurences انجام می‌شود</p>

<script src="//gist.github.com/hameds/186fa7e1ebad238d5477251019f59069.js"></script>

<p>در این مثال، کل کد را در یک بلوک try/catch گذاشتم. اگر exception ای رخ بدهد آن را قورت می‌دهم و به جایش یک exception از نوع ArgumentException ایجاد و throw می‌کنم. می‌دانم این راه حل خوبی نیست اما نگران نباشید. فعلاً این کد پاسخگوی نیاز تست من است، در آینده وقتی درباره refactoring صحبت کنیم، برمی‌گردیم و این کد را دوباره با هم مرور خواهیم کرد.</p>

<p>با اجرای مجدد تست‌ها، می‌توانیم ببینیم که نه تنها defect مرتفع شده بلکه کلیه کاربردهای قبلی هم مثل قبل درست کار می‌کنند.</p>

<p><img src="http://elmah.ir/oldimg/TDD/8/image158AFC467273BD.png" alt="" /></p>

<p>ادامه دارد&hellip;</p>
</article>
    <footer class="post-footer">
      
      <p class="post-copyright">       
        این نوشته  <strong>1364</strong> روز پیش منتشر شده و محتوای آن ممکن است برای امروز، غیردقیق یا حتی اشتباه باشد. اگر اشتباهی دیدید لطفاً در گیت‌هاب اعلام یا رفعش کنید.
      </p>
    </footer>
    <hr>
    <div id="darinternet_comment"></div>
    <script type="text/javascript">    
      (function () {
        var cmt = document.createElement('script');
        cmt.type = 'text/javascript';
        cmt.async = true;
        cmt.src = 'https://www.darinternet.com/script/commentscript/ccc91a81-b2c4-e711-90f9-005056000124';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(cmt);
      })();
    </script>
    
    
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017 elmah</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="http://elmah.ir/js/bundle.js"></script>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-109151384-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>





  </body>
</html>
