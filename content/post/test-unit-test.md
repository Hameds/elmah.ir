---
title: "تست برای تست"
cover: "/img/unit_test_runner.png"
date: 2019-02-25T10:26:36+03:30
draft: false
---

### مساله

برای تست کردن اجزای کد، Unit Test می‌نویسیم. اما برای تست کردن کد خود تست‌ها چه کنیم؟

این مساله چه زمانی ایجاد می‌شه؟ وقتی که تست‌ها رو بعد از نوشتن کد اصلی بخواهیم اضافه کنیم. در واقع اگر به روش‌هایی نظیر [TDD](https://elmah.ir/post/78-30-%D8%B1%D9%88%D8%B2-%D8%A8%D8%A7-tdd--%D8%B1%D9%88%D8%B2-%D8%A7%D9%88%D9%84---tdd-%DA%86%DB%8C%D8%B3%D8%AA-%D9%88-%DA%86%D8%B1%D8%A7-%D8%A8%D8%A7%DB%8C%D8%AF-%D8%A7%D8%B2-%D8%A2%D9%86-%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87-%DA%A9%D9%86%D9%85/) استفاده کنیم و تست‌ها رو قبل از نوشتن کد اصلی نوشته باشیم احتمال مشکل در تست‌ها به شدت پایین میاد. اما وقتی یک [Legacy Code](https://www.aparat.com/v/k9ix7) داریم که احتمالاً تستی هم نداره، این مساله خیلی جدیه. چرا؟ چون ممکنه برای منطق اشتباهی تست بنویسیم یا تستی که می‌نویسیم به دلیل باگ همیشه pass بشه. حالا راه حل چیه؟

### راه حل

یک راه ساده و شاید تا حدی بدیهی اینه که بعد از نوشتن تست و اطمینان از pass شدنش، کد رو تغییر بدیم و اون بخشی از کد که باعث pass شدن تست می‌شه رو کامنت کنیم یا کاری کنیم که نتیجه متفاوتی برگردونه. در این حالت باید تست fail بشه، اما اگر تست همچنان pass ‌می‌شد معنیش اینه که تستی که نوشتیم باگ داره.

هر چند در [Code Review](https://www.aparat.com/v/ziNsv) احتمالاً خیلی از مشکلات کدهامون رو توسط همکاران دیگه متوجه می‌شیم اما خوبه که بتونیم اطمینان از تست‌ها رو به روشی مثل همینی که بالاتر گفتم بیشتر کنیم. شما چه راه‌حلی به نظرتون می‌رسه؟
